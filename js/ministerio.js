// Dados das músicas para a Missa de Ação de Graças
const musicData = [
    {
        moment: "Entrada",
        icon: "fas fa-door-open",
        songs: [
            {
                title: "Festa do Cordeiro",
                key: "C",
                lyrics: `[Intro] D  D/C  G/B  A
        D  D/C  D/F#  G  
        A  G/B  A

   D       D/C
Cantai, cantai ao Senhor Deus
   G/B       A4
Cantai, sua glória entre as nações
  G
Entrai com alegria, dons e oferendas
    A4          A
Nos átrios do Senhor
   D       D/C
Louvai, louvai ao Senhor Deus
    G/B    A4
Louvai, aquele que venceu
   G
Na Cruz nos deu a vida, curou nossas feridas
     A4          A
Seu sangue nos lavou
   G              G   A     Bm          A4  A
Trazei o mundo inteiro    à festa do Cordeiro
G                A    G/B A/C#
Vinde, vinde celebrar

          D                     G  
Reina o Senhor, eterno é o Seu Amor
   D/F#     Em           D/F#      A G/B A/C# A
Vestido de glória e majestade está aqui
          D      D     Em  D/F# G   A Bm
Reina o Senhor, eterno é o Seu Amor
      Em          D/F#       A4  A 
Sua beleza tudo recria, tudo refaz

( D  C  C  G )  

   D       D/C
Cantai, cantai ao Senhor Deus
   G/B       A4
Cantai, sua glória entre as nações
  G
Entrai com alegria, dons e oferendas
    A4          A
Nos átrios do Senhor
   D       D/C
Louvai, louvai ao Senhor Deus
    G/B    A4
Louvai, aquele que venceu
   G
Na Cruz nos deu a vida, curou nossas feridas
     A4          A
Seu sangue nos lavou
 G            G   A   Bm            D A/C# A D/F#
Exultem de alegria os céus e toda a ter----ra
G                       A4  A
Diante do Cordeiro vencedor

          D                     G  
Reina o Senhor, eterno é o Seu Amor
   D/F#     Em           D/F#      A G/B A/C# A
Vestido de glória e majestade está aqui
          D      D     Em  D/F# G   A Bm
Reina o Senhor, eterno é o Seu Amor
      Em          D/F#       A4  A 
Sua beleza tudo recria, tudo refaz

( G  A  G/B  G  A )

          D      D    Em   D/F# G  
Reina o Senhor, eterno é o Seu Amor
   D/F#     Em           D/F#      A G/B A/C# A
Vestido de glória e majestade está aqui
          D  Em D/F#    D/A            G
Reina o Senhor,        eterno é o Seu Amor
      Em          D/F#       A4  A 
Sua beleza tudo recria, tudo refaz

          G
Reina o Senhor!
          Bm
Reina o Senhor!
          G    D/F# A   D
Reina o Senhor`
            }
        ]
    },
    {
        moment: "Ato Penitencial",
        icon: "fas fa-hands-praying",
        songs: [
            {
                title: "Kyrie Eleison - JMJ RIO 2013",
                key: "Bm",
                lyrics: `[Intro] Bm7  G7M
        Bm7  G7M

[Primeira Parte]

    Bm7       A      G7M
Senhor, que viestes salvar
        Bm7         A/C#  F#4  F#
Os corações arrependi____dos

[Refrão]

       D  D4  D  A/C#   
Kyrie  elei____son
  F#7/A#  F#7  Bm7   
Elei__________son
  E4  E  A
Elei____son

 D       D4  D  A/C#   
Kyrie  elei____son
  F#7/A#  F#7  Bm7   
Elei__________son,
  E4  E  A
Elei____son

( Bm7  F#m7  G7M )

[Segunda Parte]

     Bm7         A9        G7M
Ó, Cristo, que viestes chamar
        Bm7        A/C#  F#4  F#
Os pecadores humilhados

[Refrão 2]

      D    D4  D  A/C#   
Christe  ele____ison
  F#7/A#  F#7  Bm7   
Elei__________son
  E4  E  A  G/A  A  G/A
Ele____ison

 D         D4  D  A/C#  A/B
Christe  elei____son
  F#7/A#  F#/C#  Bm7  Bm7/A     
Ele____________ison
  E/G#  E  A
Ele______ison

( G#m7(5-)  C#7  F#m7  A/B )
( D7M(6/9)  E7(4) )

[Terceira Parte]

    F#m7            E6   D7M
Senhor, que intercedeis por nós
              F#m7           E/G#  C#4
Junto a Deus Pai que nos perdo_____a

( E/F#  F#  E/F# )

[Refrão]

    B  B/D#  E  B/D#  C#m7  C#m7/B  
Kyrie      ele______ison
  A#m11  D#7  G#m7  
Ele_________ison
  C#4  C#7  F#  E/F#  F#  E/F#
Ele_______ison

    B  B/D#  E  B/D#  C#m7  C#m7/B  
Kyrie      ele______ison
  A#m11  D#7  G#m7   
Ele_________ison
  C#4  C#7  F# 
Ele_______ison

[Final] E/F#  F#  A7M`
            }
        ]
    },
     {
        moment: "Glória",
        icon: "fas fa-hands-praying",
        songs: [
            {
                title: "Glória a Deus Nas Alturas - ELiana Ribeiro",
                key: "G",
                lyrics: `[Intro] D9  C9  D9
        C9  D9  C9


[Primeira Parte] 

  D9                 C9
Glória a Deus nas alturas
   G
E paz na Terra
                     D9   ( D4  D )
Aos homens por Ele amados
    D9        C9
Senhor Deus, rei dos céus
 G                D9
Deus Pai Todo Poderoso

[Ponte 1]

            Am  D9
Nós vos louva__mos
              Am  D9
Nós vos bendize__mos
            Am  D9
Nós vos adora__mos
                Am  D9
Nós vos glorifica__mos
                C9
Nós vos damos graças
     G             D9
Por vossa imensa glória

[Segunda Parte] 

               C9
Senhor Jesus Cristo
 G        D9    ( D4  D )
Filho Unigênito
    D9           C9
Senhor Deus, Cordeiro de Deus
 G             D9
Filho de Deus Pai

[Ponte 2]

 Am                  G
Vós, que tirais o pecado do mundo
 C9               D9
Tende piedade de nós
 Am                  G
Vós, que tirais o pecado do mundo
C9               D9
Acolhei a nossa súplica
 Am                  G
Vós, que estais à direita do Pai
 C9               D9
Tende piedade de nós

[Refrão]

               Am  D9
Só vós sois o Sa_nto
              Am  D9
Só vós, o Senhor
             C9              D9
Só vós, o Altíssimo, Jesus Cristo
 E              A
Com o Espírito Santo

[Final]

                  G       D9
Na glória de Deus   Pai amém!
                  G       D9
Na glória de Deus   Pai amém!
                  G       D9
Na glória de Deus   Pai amém!
                  G       D9
Na glória de Deus   Pai amém!`
            }
        ]
    },
    {
        moment: "Salmo",
        icon: "fas fa-book-bible",
        songs: [
            {
                title: "SALMO 48 (48) - FELIZES OS HUMILDES DE ESPÍRITO, PORQUE DELES É O REINO DOS CÉUS. (Paulo Neto)",
                key: "F",
                lyrics: `              
  F          Gm          F 
FELIZES OS HUMILDES DE ESPÍRITO, 
F/A    Bb        C7        F
PORQUE DELES É O REINO DOS CÉUS. (BIS)

   F                                C  F
1. POR QUE TEMER OS DIAS MAUS E INFELI-ZES,
Dm                             Bb    C   F
QUANDO A MALÍCIA DOS PERVERSOS ME CIRCUN-DA?
F                                  C  F
POR QUE TEMER OS QUE CONFIAM NAS RIQUEZAS 
Dm                            Bb   C  F
E SE GLORIAM NA ABUNDÂNCIA DE SEUS BE-ENS?

  F          Gm          F 
FELIZES OS HUMILDES DE ESPÍRITO, 
F/A    Bb        C7        F
PORQUE DELES É O REINO DOS CÉUS.

   F                                   C   F
2. NINGUÉM SE LIVRA DE SUA MORTE POR DINHEIRO 
Dm                      Bb     C  F
NEM A DEUS PODE PAGAR O SEU RESGA-TE. 
F                                  C  F
A ISENÇÃO DA PRÓPRIA MORTE NÃO TEM PREÇO;
Dm                         Bb C  F
NÃO HÁ RIQUEZA QUE A POSSA AD-QUIRIR, 
F                               C  F
NEM DAR AO HOMEM UMA VIDA SEM LIMI-TES 
Dm                            Bb  C  F
E GARANTIR-LHE UMA EXISTÊNCIA IMORTA-AL.

  F          Gm          F 
FELIZES OS HUMILDES DE ESPÍRITO, 
F/A    Bb        C7        F
PORQUE DELES É O REINO DOS CÉUS.

   F                                      C  F
3. NÃO TE INQUIETES, QUANDO UM HOMEM FICA RI-CO
Dm                       Bb  C  F
E AUMENTA A OPULÊNCIA DE SUA CA-SA;
F                                 C  F
POIS AO MORRER NÃO LEVARÁ NADA CONSI-GO,
Dm                        Bb   C   F
NEM SEU PRESTÍGIO PODERÁ ACOMPANHÁ-LO.

  F          Gm          F 
FELIZES OS HUMILDES DE ESPÍRITO, 
F/A    Bb        C7        F
PORQUE DELES É O REINO DOS CÉUS.

   F                                 C  F
4. FELICITAVA-SE A SI MESMO ENQUANTO VI-VO: 
Dm                                Bb    C  F
TODOS TE APLAUDEM, TUDO BEM, ISTO QUE É VI-DA!
F                                 C  F
MAS VAI-SE ELE PARA JUNTO DE SEUS PA-IS,
Dm                            Bb    C  F
QUE NUNCA MAIS E NUNCA MAIS VERÃO A LU-UZ!

  F          Gm          F 
FELIZES OS HUMILDES DE ESPÍRITO, 
F/A    Bb        C7        F
PORQUE DELES É O REINO DOS CÉUS. (BIS)`
            }
        ]
    },
    {
        moment: "Aclamação",
        icon: "fas fa-music",
        songs: [
            {
                title: "ACLAMAÇÃO EVANGELHO (TRADICIONAL)",
                key: "E",
                lyrics: `   
E B4 E
Aleluia, Aleluia, Aleluia,
A B4 E
Alelu____ia,
E
Meus discípulos, se alegrem
                    B4
Saltem mesmo de alegria
Pois bem grande é a recompensa
                        E E4
Que de Deus vão ter um dia!`
            }
        ]
    },
    {
        moment: "Ofertório",
        icon: "fas fa-gift",
        songs: [
            {
                title: "Venho a Ti - Eliana Ribeiro",
                key: "G",
                lyrics: `
E7+/9   E                                    F#m/Eb 
Venho a Ti e    sei que não estou mais sozinho
G#5+/7  Cº

               C#m7+  A7+               F#m  D9  A/B
Muitas vozes se elevam para o céu
               E7+/9         E                           
Venho a Ti como aqueles irmãos verdadeiros
F#m/Eb G#5+/7  Cº

            C#m7+      A7+           F#m   A/B
Que comigo dão a ti seus corações

   F#m   A/B     E7+ C#m      F#m        A/B       G#m   
E tu que és o amor,             escuta cada prece de dor 
 C#m
de amor
   A9       B/A  G#m  Gdim F#m            A/B           
E tu que és a paz                 dá-nos a esperança em 
             G#m        C#m
cada momento, Senhor
    F#m         A/B    E7+ C#m F#m     A/B     E9
E abre o paraíso a nós,       e abre o paraíso a nós.`
            }
        ]
    },
    {
        moment: "Santo",
        icon: "fas fa-church",
        songs: [
            {
                title: "Santo é o Senhor (Na dança da vida) - Comunidade Shalom",
                key: "Em",
                lyrics: `[Intro] F#m7(b5)  Em  D  G/B  C  G/B  G  Am  
        Am/G  F#m7(b5)  B4  B9  F#  A  C  E  B  

Em  D  C   G  D/F#  Em    F   C/E     D4  D#º
San___to, San_______to, Santo é o Senhor
Em  D  C   G  D/F#  Em    F   C/E     D4  D7M 
San___to, San_______to, Santo é o Senhor

Am7          Bm7                 C9  ( Am )
Céus e terra proclamam vossa glória
F#m7(b5)      B7 ( F#  A  C  E  B  )
Hosana nas alturas

( D  D  D  C  A  F )

Em  D  C   G  D/F#  Em    F   C/E     D4  D#º
San___to, San_______to, Santo é o Senhor
Em  D  C   G  D/F#  Em    F   C/E     D4  D7M 
San___to, San_______to, Santo é o Senhor

Am7               Bm7            C9  ( Am ) 
Bendito o que vem em nome do Senhor
F#m7(b5)      B7  Cº  C#7 ( F#  A  C  E  B  )
Hosana nas alturas

F#m  E  D  A  E/G#  F#m   G    D/F#    E4  Fº
San____to, San_______to, Santo é o Senhor
F#m  E  D  A  E/G#  F#m   G    D/F#    E4  E 
San____to, San_______to, Santo é o Senhor

             A9  G9/A          A9  G9/A
Santo é o Senhor  Santo é o Senhor
                  F7M   G9     A  
Santo é o Senhor  Santo é o Senhor`
            }
        ]
    },
    {
        moment: "Comunhão",
        icon: "fas fa-wine-glass-alt",
        songs: [
            {
                title: "Entre Nós - Ministério Amor e Adoração",
                key: "F",
                lyrics: `
[Intro] C  C#º  Bb/D  C/E  F  Bb/F  F

  F      C/E   Dm7    A/C#    Bb9
O Pão do céu, está aqui entre nós
      F/A  Bb    C9
É o Cordeiro de Deus
  F    C/E      Dm7   A/C#     Bb
Amor maior, não há em nenhum lugar
        F/A       Bb9    C9
Que o sacrifício deste altar

F                    Bb/F
Anjos cantando entre nós
   F                   C/E Am7  Dm7
O céu e a terra são um só  coração
      Bb   Bb/D     C C7
Nesta santa Comunhão
   F                      Bb/F
Jesus visitando a imperfeição
  F                       C/E  Am7    Dm7
O homem que encontra redenção, tudo aqui
      Bb    Dm7    C  C#º  Bb/D  C/E  Bb/F  F
Nesta santa Comunhão

   F     C/E   Dm7   A/C#     Bb
O dom do Pai, está aqui entre nós
     F/A       Bb9   C9
Neste vinho e neste pão
   F     C/E      Dm11     A/C#       Bb
Oh luz maior, se acende em nós, comunhão
      F/A    Bb   C7(4) C7
É pra nós a salvação

F                    Bb/F
Anjos cantando entre nós
   F                   C/E  Am7  Dm7
O céu e a terra são um só  coração
      Bb   Bb/D   C7(4) C7
Nesta santa Comunhão
   F                      Bb/F
Jesus visitando a imperfeição
  F                       C/E   Am7  Dm7
O homem que encontra redenção, tudo aqui

      Bb    Dm7    C  C#º  Bb/D  C/E  Bb/F
Nesta santa Comunhão

F                    Bb/F
Anjos cantando entre nós
   F                   C/E  Am7  Dm7
O céu e a terra são um só  coração
      Bb   Bb/D   C7(4) C7
Nesta santa Comunhão
   F                      Bb/F
Jesus visitando a imperfeição
  F                       C/E   Am7  Dm7
O homem que encontra redenção, tudo aqui
      Bb    Dm7    C
Nesta santa Comunhão

[Final] C#º  Bb/D  C/E  Bb/F`
            }
        ]
    },
    {
        moment: "Pós-Comunhão",
        icon: "fas fa-praying-hands",
        songs: [
            {
                title: "Deus É Bom e Fiel - Walmir Alencar",
                key: "G",
                lyrics: `[Primeira Parte]

        G
Caminharei (caminharei)
             C
Não me cansarei (não me cansarei)
        G  F         G
E seguirei  (e seguirei)
                 C
Rumo ao rei dos reis

(Rumo ao rei dos reis)

        G7
Caminharei (caminharei)
             C7(9)
Não me cansarei (não me cansarei)
        G7
E seguirei (e seguirei)
                 C7(9)
Rumo ao rei dos reis

(Rumo ao rei dos reis)

[Refrão]

                G
Ele é minha força!
               Em7
Deus é bom e fiel
                 C7(9)
Ele está sempre perto

Deus é bom e fiel
                   G
Vou seguro em sua mão
               Em7
Deus é bom e fiel
                 C7(9)
Ele está sempre perto

Deus é bom e fiel
                      G7
Rendo a ele o meu louvor e gratidão

( C7(9)  G7  C7(9) )

[Segunda Parte]

         G7  
Eu correrei (eu correrei)
             C7(9)
Não me cansarei (não me cansarei)
        G7
E seguirei (e seguirei)
                 C7(9)
Rumo ao rei dos reis

(Rumo ao rei dos reis)

         G7  
Eu correrei (eu correrei)
             C7(9)
Não me cansarei (não me cansarei)
        G7
E seguirei (e seguirei)
                 C7(9)
Rumo ao rei dos reis

(Rumo ao rei dos reis)

[Refrão]

                G
Ele é minha força!
               Em7
Deus é bom e fiel
                 C7(9)
Ele está sempre perto

Deus é bom e fiel
                   G
Vou seguro em sua mão
               Em7
Deus é bom e fiel
                 C7(9)
Ele está sempre perto

Deus é bom e fiel
                      G7
Rendo a ele o meu louvor e gratidão

( C7(9)  G7  C7(9) )

[Refrão]

                G
Ele é minha força!
               Em7
Deus é bom e fiel
                 C7(9)
Ele está sempre perto

Deus é bom e fiel
                   G
Vou seguro em sua mão
               Em7
Deus é bom e fiel
                 C7(9)
Ele está sempre perto

Deus é bom e fiel
                      G7
Rendo a ele o meu louvor e gratidão

[Final] C7(9)  G7  C7(9)
        F7  F#7  G7`
            }
        ]
    },
    {
        moment: "Final",
        icon: "fas fa-flag",
        songs: [
            {
                title: "VIGIA ESPERANDO A AURORA",
                key: "D",
                lyrics: `[Intro] D  G  F#m7 Em7  
        D  G  F#m7 Em7  
        D  A4  A 

[Refrão] 
   D     G           D        
Vigia esperando a aurora  
              G          D  D7 
Qual noiva esperando o amor 
     G         F#m7    Bm7     
É assim que o servo espera  
   Em7   A         D  Em7  D/F# 
A vinda do seu Senhor 
     G         F#m7    Bm7     
É assim que o servo espera  
   Em7   A         D 
A vinda do seu Senhor 

[Primeira Parte] 
              A        A/G        D 
Ao longe, um galo vai cantar seu canto 
          B         B/D#       Em7 
O sol no céu vai estender seu manto 
         G         A        D 
Na madrugada eu estarei desperto 
            E        E/G#     A  G  F#m7 Em7 
Que já vem perto o dia do Senhor! 

[Refrão] 
   D     G           D        
Vigia esperando a aurora  
              G          D  D7 
Qual noiva esperando o amor 
     G         F#m7    Bm7     
É assim que o servo espera  
   Em7   A         D  Em7  D/F# 
A vinda do seu Senhor 
     G         F#m7    Bm7     
É assim que o servo espera  
   Em7   A         D 
A vinda do seu Senhor 

[Segunda Parte] 
         A        A/G        D 
A minha voz vai acordar meu povo 
            B           B/D#      Em7 
Louvando a Deus que faz um mundo novo 
           G           A         D 
Não vou ligar se a madrugada é fria 
             E     E/G#      A  G  F#m7 Em7 
Que um novo dia logo vai chegar 

[Refrão] 
   D       G         D        
Vigia esperando a aurora  
                G        D  D7 
Qual noiva esperando o amor 
     G         F#m7    Bm7     
É assim que o servo espera  
   Em7      A      D  Em7  D/F# 
A vinda do seu Senhor 
     G         F#m7    Bm7     
É assim que o servo espera  
   Em7      A      D 
A vinda do seu Senhor 

( A  G  D ) 
( A  G  D ) 
( E  E/G#  A ) 
( G  F#m7 Em7  D/F# ) 

[Terceira Parte] 
              A           A/G      D 
Se é noite escura, acendo a minha tocha 
           B           B/D#    Em7 
Dentro do peito o sol já desabrocha 
          G               A      D 
Filho da luz, não vou dormir, vigio 
           E         E/G#   A  G  F#m7 Em7 
Ao mundo frio vou levar o amor! 

[Refrão] 
   D       G         D        
Vigia esperando a aurora  
                G        D  D7 
Qual noiva esperando o amor 
     G         F#m7    Bm7     
É assim que o servo espera  
   Em7      A      D  Em7  D/F# 
A vinda do seu Senhor 
     G         F#m7    Bm7     
É assim que o servo espera  
   Em7      A      D 
A vinda do seu Senhor`
            }
        ]
    }
];

// Função para criar links da liturgia
function createLiturgyLinks() {
    const liturgyContainer = document.getElementById('liturgy-links');
    liturgyContainer.innerHTML = '';

    musicData.forEach((moment, index) => {
        const link = document.createElement('a');
        link.className = 'liturgy-link';
        link.href = `#moment-${index}`;
        link.innerHTML = `
                <i class="${moment.icon}"></i>
                <span>${moment.moment}</span>
            `;

        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetSection = document.getElementById(`moment-${index}`);
            if (targetSection) {
                // Expande a seção
                const content = targetSection.querySelector('.moment-content');
                content.classList.add('expanded');
                const arrow = targetSection.querySelector('.moment-arrow');
                arrow.textContent = '▲';

                // Rola suavemente até a seção
                targetSection.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });

        liturgyContainer.appendChild(link);
    });
}

// Função para renderizar as músicas
function renderMusicList() {
    const musicListContainer = document.getElementById('music-list');
    musicListContainer.innerHTML = '';

    musicData.forEach((moment, momentIndex) => {
        const momentSection = document.createElement('div');
        momentSection.className = 'moment-section';
        momentSection.id = `moment-${momentIndex}`;

        const momentHeader = document.createElement('div');
        momentHeader.className = 'moment-header';
        momentHeader.innerHTML = `
                <h2><i class="${moment.icon} moment-icon"></i> ${moment.moment}</h2>
                <span class="moment-arrow">▼</span>
            `;

        const momentContent = document.createElement('div');
        momentContent.className = 'moment-content';

        moment.songs.forEach((song, songIndex) => {
            const songItem = document.createElement('div');
            songItem.className = 'song-item';
            songItem.innerHTML = `
                    <div class="song-title">
                        <span>${song.title}</span>
                        <span class="song-key">${song.key}</span>
                    </div>
                    <div class="song-lyrics">${formatLyrics(song.lyrics)}</div>
                    <button class="back-to-liturgy" onclick="scrollToLiturgy()">
                        <i class="fas fa-arrow-left"></i> Voltar para a Liturgia
                    </button>
                `;

            momentContent.appendChild(songItem);
        });

        // Adicionar evento de clique para expandir/contrair o momento
        momentHeader.addEventListener('click', function() {
            momentContent.classList.toggle('expanded');
            const arrow = this.querySelector('.moment-arrow');
            arrow.textContent = momentContent.classList.contains('expanded') ? '▲' : '▼';
        });

        momentSection.appendChild(momentHeader);
        momentSection.appendChild(momentContent);
        musicListContainer.appendChild(momentSection);
    });
}

// Função para rolar até a liturgia
function scrollToLiturgy() {
    const liturgySection = document.querySelector('.liturgy-section');
    if (liturgySection) {
        liturgySection.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });

        // Expande a liturgia
        const liturgyContent = document.querySelector('.liturgy-content');
        liturgyContent.classList.add('expanded');
        const liturgyArrow = document.querySelector('.liturgy-arrow');
        liturgyArrow.textContent = '▲';
    }
}

// Função para tornar a liturgia expansível
function setupLiturgyExpansion() {
    const liturgyHeader = document.querySelector('.liturgy-header');
    const liturgyContent = document.querySelector('.liturgy-content');
    const liturgyArrow = document.querySelector('.liturgy-arrow');

    liturgyHeader.addEventListener('click', function() {
        liturgyContent.classList.toggle('expanded');
        liturgyArrow.textContent = liturgyContent.classList.contains('expanded') ? '▲' : '▼';
    });
}

// Função para formatar acordes nas letras
function formatLyrics(lyrics) {
    // Destacar acordes entre colchetes
    return lyrics.replace(/\[(.*?)\]/g, '<span class="chord">[$1]</span>');
}

// Funções para controle de fonte
function increaseFontSize() {
    const root = document.documentElement;
    let currentSize = parseFloat(getComputedStyle(root).getPropertyValue('--font-size'));
    if (currentSize < 22) {
        root.style.setProperty('--font-size', (currentSize + 1) + 'px');
    }
}

function decreaseFontSize() {
    const root = document.documentElement;
    let currentSize = parseFloat(getComputedStyle(root).getPropertyValue('--font-size'));
    if (currentSize > 12) {
        root.style.setProperty('--font-size', (currentSize - 1) + 'px');
    }
}

function resetFontSize() {
    document.documentElement.style.setProperty('--font-size', '16px');
}

// Função para expandir/recolher todas as seções
function expandAll() {
    document.querySelectorAll('.moment-content').forEach(content => {
        content.classList.add('expanded');
    });
    document.querySelectorAll('.moment-arrow').forEach(arrow => {
        arrow.textContent = '▲';
    });
    document.querySelector('.liturgy-content').classList.add('expanded');
    document.querySelector('.liturgy-arrow').textContent = '▲';
}

function collapseAll() {
    document.querySelectorAll('.moment-content').forEach(content => {
        content.classList.remove('expanded');
    });
    document.querySelectorAll('.moment-arrow').forEach(arrow => {
        arrow.textContent = '▼';
    });
    document.querySelector('.liturgy-content').classList.remove('expanded');
    document.querySelector('.liturgy-arrow').textContent = '▼';
}

// Função de busca
function setupSearch() {
    const searchInput = document.getElementById('search-input');
    searchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();

        document.querySelectorAll('.moment-section').forEach(section => {
            const momentHeader = section.querySelector('.moment-header h2').textContent.toLowerCase();
            const songs = section.querySelectorAll('.song-item');
            let hasMatch = false;

            songs.forEach(song => {
                const title = song.querySelector('.song-title span').textContent.toLowerCase();
                const lyrics = song.querySelector('.song-lyrics').textContent.toLowerCase();

                if (title.includes(searchTerm) || lyrics.includes(searchTerm)) {
                    song.style.display = 'block';
                    hasMatch = true;
                } else {
                    song.style.display = 'none';
                }
            });

            // Mostrar/ocultar seção baseado nos resultados
            section.style.display = hasMatch || momentHeader.includes(searchTerm) ? 'block' : 'none';
        });
    });
}

// Funções auxiliares
function formatReadingText(text) {
    return text.replace(/\.\s/g, '.<br>')
               .replace(/\n/g, '<br>')
               .replace(/\s\s+/g, ' ');
}

function formatPsalmText(text, refrao) {
    let formatted = text;
    if (refrao) {
        // Adicionar refrão após cada estrofe
        const verses = text.split(/\n+/);
        formatted = '';
        verses.forEach((verse, index) => {
            if (verse.trim()) {
                formatted += verse.trim() + '<br>';
                if (index < verses.length - 1) {
                    formatted += `<span class="liturgy-role">R.</span> <span class="liturgy-response">${refrao}</span><br><br>`;
                }
            }
        });
    }
    return formatted;
}

// Inicialização
document.addEventListener('DOMContentLoaded', function() {
    // Executar funções existentes
    createLiturgyLinks();
    renderMusicList();
    setupLiturgyExpansion();
    
    // Adicionar eventos aos botões
    document.getElementById('increase-font').addEventListener('click', increaseFontSize);
    document.getElementById('decrease-font').addEventListener('click', decreaseFontSize);
    document.getElementById('reset-font').addEventListener('click', resetFontSize);
    
    document.getElementById('expand-all').addEventListener('click', expandAll);
    document.getElementById('collapse-all').addEventListener('click', collapseAll);
    
    setupSearch();
    
});


// ============================================================================
// NOVA FUNCIONALIDADE: Buscar Liturgia via API
// ============================================================================

function carregarLiturgia(data = null) {
    let url = "https://api-liturgia-diaria.vercel.app/";

    if (data) {
        url += `?date=${data}`;
    }

    fetch(url)
        .then(res => res.json())
        .then(data => renderizarLiturgia(data))
        .catch(() => {
            document.getElementById("liturgyContent").innerHTML =
                "<p>Erro ao carregar a liturgia.</p>";
        });
}

document.addEventListener("DOMContentLoaded", () => {
    carregarLiturgia(); // hoje
});

function carregarLiturgia(data = null) {
    let url = "https://api-liturgia-diaria.vercel.app/";

    if (data) {
        url += `?date=${data}`;
    }

    fetch(url)
        .then(res => res.json())
        .then(json => renderizarLiturgia(json.today))
        .catch(err => {
            console.error(err);
            document.getElementById("liturgyContent").innerHTML =
                "<p>Erro ao carregar a liturgia.</p>";
        });
}

function renderizarLiturgia(l) {
    const content = document.getElementById("liturgyContent");

    content.innerHTML = `
        <h3>${l.entry_title}</h3>
        <p><strong>Data:</strong> ${l.date}</p>
        <p><strong>Cor Litúrgica:</strong> ${l.color}</p>

        <hr>

        <h4>${l.readings.first_reading.title}</h4>
        <p>${formatReadingText(l.readings.first_reading.text)}</p>

        <h4>${l.psalm.title}</h4>
        <p><span class="liturgy-role">R.</span> ${l.psalm.response}</p>
        <p>${l.psalm.content_psalm.join("<br><br>")}</p>

        <h4>${l.readings.gospel.title}</h4>
        <p>${formatReadingText(l.readings.gospel.text)}</p>
    `;
}

function buscarPorData() {
    const data = document.getElementById("dataLiturgia").value;
    if (data) {
        carregarLiturgia(data);
    }
}
